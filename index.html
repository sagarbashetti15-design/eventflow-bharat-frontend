<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>EventFlow Bharat | Premium Event Planning</title>
<script src="https://checkout.razorpay.com/v1/checkout.js"></script>

<style>
body{margin:0;font-family:Inter,Arial;background:#F7F9FC;color:#1F2937}
.container{max-width:1200px;margin:auto;padding:40px}
.hero{background:linear-gradient(135deg,#6C63FF,#4B47C6);color:#fff;border-radius:24px;padding:60px}
.hero h1{font-size:52px;margin:0}
.hero p{font-size:18px;opacity:.9}
.card{background:#fff;border-radius:18px;padding:32px;box-shadow:0 10px 30px rgba(0,0,0,.08);margin:40px 0}
.ai{background:#EEF0FF;border-left:6px solid #6C63FF}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:24px}
.package{border:2px solid #E5E7EB;border-radius:18px;padding:28px;text-align:center}
.package h3{margin-top:0}
button{background:#6C63FF;color:#fff;border:none;border-radius:12px;padding:14px;width:100%;cursor:pointer;font-size:16px}
input{width:100%;padding:14px;border-radius:12px;border:1px solid #D1D5DB;margin:10px 0}
#booking,#success,#admin{display:none}
</style>
</head>

<body>
<div class="container">

<div class="hero">
  <h1>EventFlow Bharat</h1>
  <p>Premium events. Trusted execution. AI-powered booking.</p>
</div>

<div class="card ai">
  <h3>ðŸ¤– AI Event Assistant</h3>
  <p id="aiText">What kind of event are you planning?</p>
  <button onclick="askAI('wedding')">Wedding</button>
  <button onclick="askAI('birthday')">Birthday</button>
  <button onclick="askAI('corporate')">Corporate</button>
</div>

<div class="card">
  <h2>Select Your Package</h2>
  <div class="grid">
    <div class="package">
      <h3>Basic</h3><p>â‚¹9,999</p>
      <button onclick="selectPkg('Basic',9999)">Choose</button>
    </div>
    <div class="package">
      <h3>Premium</h3><p>â‚¹24,999</p>
      <button onclick="selectPkg('Premium',24999)">Choose</button>
    </div>
    <div class="package">
      <h3>Luxury</h3><p>â‚¹49,999</p>
      <button onclick="selectPkg('Luxury',49999)">Choose</button>
    </div>
  </div>
</div>

<div class="card" id="booking">
  <h2>Book Your Event</h2>
  <input id="name" placeholder="Event Name">
  <input id="date" type="date">
  <input id="venue" placeholder="Venue">
  <input id="email" placeholder="Email">
  <button onclick="pay()">Pay & Confirm</button>
</div>

<div class="card" id="success">
  <h2>ðŸŽ‰ Booking Confirmed</h2>
  <p>You will receive an email confirmation shortly.</p>
</div>

<button onclick="loadAdmin()">Admin Dashboard</button>
<div class="card" id="admin"></div>

</div>

<script>
const API="https://eventflow-bharat-backend.onrender.com";
let pkg="",amt=0;

function selectPkg(p,a){
  pkg=p;amt=a;
  booking.style.display="block";
}

async function pay(){
  const key=await fetch(API+"/payment/key").then(r=>r.json());
  const order=await fetch(API+"/payment/order",{method:"POST",headers:{'Content-Type':'application/json'},body:JSON.stringify({amount:amt})}).then(r=>r.json());

  new Razorpay({
    key:key.key,
    amount:order.amount,
    order_id:order.id,
    handler:async()=>{
      await fetch(API+"/events",{method:"POST",headers:{'Content-Type':'application/json'},body:JSON.stringify({
        name:name.value,date:date.value,venue:venue.value,email:email.value,package:pkg
      })});
      booking.style.display="none";success.style.display="block";
    }
  }).open();
}

async function loadAdmin(){
  const d=await fetch(API+"/admin/dashboard").then(r=>r.json());
  admin.style.display="block";
  admin.innerHTML=`<h3>Admin Dashboard</h3><p>Total Events: ${d.totalEvents}</p><p>Revenue: â‚¹${d.revenue}</p>`;
}

async function askAI(q){
  const r=await fetch(API+"/ai/assist",{method:"POST",headers:{'Content-Type':'application/json'},body:JSON.stringify({question:q})});
  aiText.innerText=(await r.json()).reply;
}
</script>

</body>
</html>
