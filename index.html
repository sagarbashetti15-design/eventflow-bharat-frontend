<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>EventFlow Bharat</title>
<style>
body{font-family:Arial;background:#f4f6f8;padding:30px}
.card{background:#fff;padding:20px;border-radius:10px;
max-width:900px;margin:20px auto;box-shadow:0 6px 18px rgba(0,0,0,.1)}
.hidden{display:none}
input,button{padding:10px;margin:8px 0;width:100%}
button{background:#2c7be5;color:#fff;border:none;cursor:pointer}
nav button{width:auto;margin-right:10px}
</style>
</head>

<body>

<div class="card" id="login">
<h2>Login â€“ EventFlow Bharat</h2>
<input id="email" placeholder="Email">
<input id="password" type="password" placeholder="Password">
<button onclick="login()">Login</button>
</div>

<div id="app" class="hidden">

<nav class="card">
<button onclick="show('dashboard')">Dashboard</button>
<button onclick="show('create')">Create Event</button>
<button onclick="show('list')">Events</button>
<button id="adminBtn" onclick="admin()" style="display:none">Admin</button>
</nav>

<div class="card" id="dashboard">
<h3>Dashboard</h3>
<p>Welcome to EventFlow Bharat</p>
</div>

<div class="card hidden" id="create">
<h3>Create Event</h3>
<input id="name" placeholder="Event Name">
<input id="date" type="date">
<input id="venue" placeholder="Venue">
<button onclick="createEvent()">Save</button>
</div>

<div class="card hidden" id="list">
<h3>Your Events</h3>
<ul id="events"></ul>
</div>

</div>

<script>
const API="https://eventflow-bharat-backend.onrender.com";
let TOKEN="";

function show(id){
["dashboard","create","list"].forEach(i=>document.getElementById(i).classList.add("hidden"));
document.getElementById(id).classList.remove("hidden");
}

async function login(){
const email=emailInput.value;
const password=passwordInput.value;
const res=await fetch(API+"/auth/login",{method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({email,password})});
const data=await res.json();
TOKEN=data.token;
if(!TOKEN){alert("Login failed");return;}
loginDiv.classList.add("hidden");
app.classList.remove("hidden");
if(data.role==="ADMIN") adminBtn.style.display="inline";
}

async function createEvent(){
await fetch(API+"/events",{method:"POST",
headers:{"Content-Type":"application/json","Authorization":TOKEN},
body:JSON.stringify({name:name.value,date:date.value,venue:venue.value})});
loadEvents();
}

async function loadEvents(){
const res=await fetch(API+"/events",{headers:{Authorization:TOKEN}});
const list=await res.json();
events.innerHTML="";
list.forEach(e=>{
const li=document.createElement("li");
li.innerText=`${e.name} | ${e.date} | ${e.venue}`;
events.appendChild(li);
});
}

async function admin(){
const res=await fetch(API+"/admin/stats",{headers:{Authorization:TOKEN}});
alert(JSON.stringify(await res.json(),null,2));
}
</script>

</body>
</html>


